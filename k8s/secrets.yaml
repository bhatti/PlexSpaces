# SPDX-License-Identifier: LGPL-2.1-or-later
# Copyright (C) 2025 Shahzad A. Bhatti <bhatti@plexobject.com>
#
# Kubernetes Secrets for PlexSpaces Node
# Supports mTLS for service-to-service authentication and JWT for public APIs

apiVersion: v1
kind: Secret
metadata:
  name: plexspaces-tls
  labels:
    app: plexspaces
    component: node
type: Opaque
data:
  # Base64 encoded TLS certificates
  # To create: kubectl create secret tls plexspaces-tls --cert=tls.crt --key=tls.key --dry-run=client -o yaml
  # For development, use self-signed certificates
  tls.crt: ""  # Base64 encoded certificate
  tls.key: ""  # Base64 encoded private key
  ca.crt: ""   # Base64 encoded CA certificate (for mTLS)

---
apiVersion: v1
kind: Secret
metadata:
  name: plexspaces-jwt
  labels:
    app: plexspaces
    component: node
type: Opaque
data:
  # Base64 encoded JWT signing keys
  # To create: echo -n "your-secret-key" | base64
  jwt-secret: ""  # Base64 encoded JWT secret for signing tokens

---
apiVersion: v1
kind: Secret
metadata:
  name: plexspaces-db-credentials
  labels:
    app: plexspaces
    component: node
type: Opaque
stringData:
  # Plain text credentials (Kubernetes will base64 encode them)
  # For production, use external secret management (e.g., Vault, AWS Secrets Manager)
  postgres-host: "postgres-service"
  postgres-port: "5432"
  postgres-database: "plexspaces"
  postgres-user: "plexspaces"
  postgres-password: "change-me-in-production"
  
  redis-host: "redis-service"
  redis-port: "6379"
  redis-password: "change-me-in-production"

